# 進程池如何共享資源

1. 使用 Pool 共享資源需要使用 Manager 才可以讓多個程序共享資源
2. Pool 無法使用 multiprocessing.Value

~~~python
from multiprocessing import Pool, Manager

def add_one(n, lock):
    lock.acquire()
    n.value += 1
    lock.release()

if __name__ == '__main__':
    m = Manager()
    n = m.Value('d', 0.0)
    lock = m.Lock()

    with Pool(4) as pool:
        for _ in range(100):
            pool.apply_async(add_one, args=(n, lock, ))
        pool.close()
        pool.join()
    print(n.value)
~~~

執行結果 :

~~~python
100.0
~~~

